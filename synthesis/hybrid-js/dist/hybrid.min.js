!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.HybridJS=n():e.HybridJS=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=t(2),i=r(o),f="com.companyName.hybridSDK.handler.",u=i["default"];u.wrapAPI("view.openUrl",function(e){u.isInApp?u.invokeApp(f+"UrlHandler/startPage",{url:e}):location.href=e}),u.wrapAPI("view.launchApp",function(e){u.invokeApp(f+"UrlHandler/startApp",{pkg:e})}),u.wrapAPI("device.getSN",function(e){u.invokeApp(f+"DeviceInfoHandler/getSN",{callback:e})}),u.wrapAPI("ui.toast",function(e){e&&u.invokeApp(f+"InteractHandler/toast",{msg:e})}),e.exports=u},function(e,n){"use strict";function t(e,n){if(/^web\./.test(e))throw new Error("此处不要使用`web`作为根命名空间");o(e,n)}function r(e,n){o("web",e,n)}function o(e,n,t){arguments.length<3&&(t=arguments[1],n=arguments[0],e="");var r=n.split(/\./),o=r.pop();r[0]===e&&r.shift();var i=e?L[e]||(L[e]={}):L;i=d(i,r),o&&k(t)&&(i[o]=t)}function i(e,n){if(!e)return!1;var t=T+"://"+e;if(!n)return y(t);if(t+="?",n=k(n)?{callback:n}:n,"object"!==("undefined"==typeof n?"undefined":S(n)))throw TypeError("params show be an Object or Function or Undefined");R in n&&(t+=R+"="+U(n[R])+"&",delete n[R]);var r=n.callback||null;if(k(r)){var o=v(e,r,n.context||L,void 0!==n.nextTick?n.nextTick:!0);delete n.callback,delete n.context,delete n.nextTick,t+=J+"="+U(o)+"&"}t+="value="+U(JSON.stringify(n)),y(t)}function f(e,n){if("string"!=typeof e||n&&"string"!=typeof n)throw Error("参数不合法，必须是字符串");if(n){var t=c(n),r=t?t[R]:null;if(r){var o=h(e,r);delete t[R],k(o)&&o(t.value)}else u(e,n,t)}else u(e)}function u(e,n,t){var r=e.split(/\./);if(/window|web/.test(r[0])&&r.shift(),r.length){var o=r.pop(),f=d(L.web,r)[o]||d(_,r)[o];if(!k(f))throw Error("调用的方法 "+o+" 不存在");if(t){if(!(J in t)||"string"!=typeof String(t[J]))return void f(t.value);var u=t[J];delete t[J];var a=f(t.value),c={};if("object"==("undefined"==typeof a?"undefined":S(a))&&a instanceof HTMLElement)throw Error("HTMLElement instance is not allowed to return to native.");c[R]=u,c.value=a,i(e.replace(/\//g,"."),c)}else f(n)}}function a(e,n){if("string"!=typeof e||n&&"string"!=typeof n)throw Error("参数不合法，必须是字符串");if(n){var t=c(n);l(e,t.value)}else l(e)}function c(e){e=decodeURIComponent(e);var n=void 0;try{n=JSON.parse(e)}catch(t){if(/{/.test(e))throw t;n=null}return n}function p(e,n){if(e){var t=P[e];if(!k(n))return!1;if(n.name||console.warn("绑定事件的handler请尽量不用匿名函数！"),t){if(j(t)||(t=[t]),j(t)&&~t.indexOf(n))return;t.push(n)}else t=n,i(e+"/listen");P[e]=t}}function l(e,n){if(!e)return void(L.debug&&console.warn("Receive empty event"));var t=P[e];j(t)?t.forEach(function(e){e(n)}):k(t)&&t(n)}function s(e,n){if(e&&(i(e+"/removeListen"),e in P))if(k(n)){var t=P[e];j(t)?(P[e]=t.filter(function(e){return e!=n}),P[e].length!==t.length):t==n?delete P[e]:!1}else delete P[e]}function d(e,n){for(var t=0,r=void 0;r=n[t++];){if(r in e&&"object"!==A(e[r]))throw Error(r+" 命名空间冲突");r in e||(e[r]={}),e=e[r]}return e}function v(e,n,t,r){if(k(n)){var o=function(){var o=O+Date.now(),i=C[e]||(C[e]={});return i[o]=function(e){var f=I.call(arguments);r?setTimeout(function(){n.apply(t,f)},0):n.apply(t,f),delete i[o]},{v:o}}();if("object"===("undefined"==typeof o?"undefined":S(o)))return o.v}return""}function h(e,n){return(C[e]||{})[n]}function y(e){if(L.isInApp&&!L.debug||console.info("Request url: %s\nOrigin url: %s",e,decodeURIComponent(e)),L.isInApp){var n=document.createElement("iframe");return document.body.appendChild(n),n.style.cssText="display:none;width:0px;height:0px",n.src=e,setTimeout(function(){n.parentNode.removeChild(n)},0),!0}}function m(e,n){var t=arguments.length<=2||void 0===arguments[2]?L:arguments[2];"__defineGetter__"in t?t.__defineGetter__(e,function(){return k(n)?n():n}):t[e]=k(n)?n():n}function b(e){var n=[];for(var t in e){var r=e[t];"object"==("undefined"==typeof r?"undefined":S(r))&&(r=JSON.stringify(r)),n.push(t+"="+r)}return n.join("&")}function w(e,n){for(var t=0;t<n.length;t++)if(new RegExp(n[t]).test(e))return n[t].replace(/\s+/,"");return"Other"}function g(e){if(!e)return e;if(e=e.trim(),!/^http(''|s)?:\/\//.test(e)){var n=x(e);e=e.replace(/^(?:\.)?\//,""),e=n.protocol+"//"+n.host+"/"+e}return e}function x(e){var n=document.createElement("a");return n.href=e||"x.html",{protocol:n.protocol.replace(":",""),host:n.host,port:n.port,pathname:n.pathname,search:n.search,hash:n.hash}}function A(e){return Object.prototype.toString.apply(e).slice(8,-1).toLowerCase()}function k(e){return"function"===A(e)}var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_=window,E=navigator.userAgent,I=Array.prototype.slice,j=Array.isArray,U=_.encodeURIComponent,H="HybridApp",N="HybridJS",T="hybrid",O="__t_",J="req_sn",R="res_sn",C={},P={},L=_[N]={},D=E.match(new RegExp(H+"\\/([^\\/]+)\\/(\\d+)"));m("version","1.0.0"),m("desc","JavaScript layer for "+H+" hybrid framework."),m("deviceName",function(){var e=E.match(/\s*([^]+)\s+Build/);return e?e[1]:"Unknown"}),m("os",w(E,[H,"Unknown"])),m("isInApp",L.os==H),m("appName",D?D[1]:""),m("appVersion",D?D[2]:0),L.debug=0,L.web={},m("wrapAPI",function(){return t}),m("assign",function(){return r}),m("invokeApp",function(){return i}),m("invokeWeb",function(){return f}),m("notifyWeb",function(){return a}),m("on",function(){return p}),m("off",function(){return s}),m("util",function(){return{serialize:b,resolveUrl:g,parseUrl:x}}),e.exports=L}])});