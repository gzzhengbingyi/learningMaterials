!function(){var e=navigator.userAgent,t=window.navigator.userAgent.toLowerCase().indexOf("mobile")===-1,n=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=e.indexOf("Android")>-1||e.indexOf("Linux")>-1;window.yxwork={isPC:window.navigator.userAgent.toLowerCase().indexOf("mobile")===-1,isiOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,ready:function(e){e&&(c=e)},error:function(e){e&&(l=e)}};var o,r={isPanelShow:!1,init:function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");t.style.cssText="position: fixed;right: 10px;bottom: 10px;width: 80px;height: 40px;line-height: 40px;background: #000;color: #fff;text-align: center;cursor:pointer;z-index:1000000;",t.id="yx-log-btn",t.innerHTML="Log",t.addEventListener("click",function(){r.isPanelShow?(e.style.display="none",n.style.display="none",t.innerHTML="Log"):(e.style.display="block",n.style.display="block",t.innerHTML="Close"),r.isPanelShow=!r.isPanelShow},!1),n.style.cssText="display:none;position: fixed;left: 10px;bottom: 10px;width: 80px;height: 40px;line-height: 40px;background: #000;color: #fff;text-align: center;cursor:pointer;z-index:1000000;",n.innerHTML="Clear",n.addEventListener("click",function(){e.innerHTML=""},!1),e.style.cssText="display:none;position: fixed;left: 0;bottom: 0;width: 100%;height:40%; background: #fff;border-top: 1px solid #aaa;overflow-y: auto;z-index:999999;",e.id="yx-log-panel",document.body.appendChild(t),document.body.appendChild(n),document.body.appendChild(e)},console:function(e,t){var n=v(e);if("pickImage"===t)for(var i=n.data,o=0,r=i.length;o<r;o++)i[o].data=i[o].data.substring(0,50)+"...";var a=document.getElementById("yx-log-panel"),c=document.createElement("div");c.style.cssText="padding: 0 4px;line-height: 24px;border-bottom: 1px solid #ddd;word-break:break-all;",c.innerHTML='<span style="color:blue;">'+t+"</span>:"+JSON.stringify(n),a.appendChild(c)}},a={iOS:108,aos:4,pc:4};o=n?a.iOS:i?a.aos:t?a.pc:-(1/0);var c,l,s=201607141346,u=!1,d=!1,f=!1,m=!1,p=!1,g=[1,2,3,4,5,6],y={402:"参数错误",403:"无接口调用权限",404:"要访问的接口不存在",405:"无硬件访问权限",400:"接口调用错误"},b=function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(){return Math.random().toString().split(".")[1]},v=function(e){var t="object"==typeof e&&b(e)?2:1,n=1===t?{}:[];for(var i in e)n[i]="object"==typeof e[i]?v(e[i]):e[i];return n};Array.prototype.yxUnique=function(){for(var e,t=[],n={},i=0;null!=(e=this[i]);i++)n[e]||(t.push(e),n[e]=!0);return t},Object.extend=function(e,t,n){e=e||{};var i,o=typeof t,r=1;for("undefined"!==o&&"boolean"!==o||(n="boolean"===o&&t,t=e,e=this),"object"!=typeof t&&"[object Function]"!==Object.prototype.toString.call(t)&&(t={});r<=2;){if(i=1===r?e:t,null!=i)for(var a in i){var c=e[a],l=i[a];e!==l&&(n&&l&&"object"==typeof l&&!l.nodeType?e[a]=this.extend(c||(null!=l.length?[]:{}),l,n):void 0!==l&&(e[a]=l))}r++}return e};var x=function(e,t,n){for(var i=0,o=e.length,r=0;r<o;r++)if(e[r][t].toString()===n.toString()){i=r;break}return i};window.loader={},window.funCallJavaScript=function(e){var t=JSON.parse(e.replace(/\\/g,"\\\\"));loader[t.call_flag]&&"function"==typeof loader[t.call_flag]&&loader[t.call_flag].call(null,t)};var w=function(e){FunExternal(JSON.stringify(e))},S=function(e,t){loader[e.call_flag]||(loader[e.call_flag]=t),w(e)},k=function(){window.loader={},window.FNJSBridge={},FNJSBridge={call:function(e,t,n){var i={call_flag:h(),fun_id:e,params:t};S(i,n)}}},T=function(e,t,n){u&&r.console(e,n);var i={success_cb:t.success&&"function"==typeof t.success?t.success:null,error_cb:t.error&&"function"==typeof t.error?t.error:null,cancel_cb:t.cancel&&"function"==typeof t.cancel?t.cancel:null,complete_cb:t.complete&&"function"==typeof t.complete?t.complete:null};if(200===e.code)"confirm"===n?1===e.data?i.success_cb&&i.success_cb.call(null,e.data):2===e.data&&i.cancel_cb&&i.cancel_cb.call(null,e.data):"actionsheet"===n?e.data?i.success_cb&&i.success_cb.call(null,e.data):i.cancel_cb&&i.cancel_cb.call(null,e.data):i.success_cb&&i.success_cb.call(null,e.data);else{var o=v(e.data);o.code=e.code,o.msg=e.msg||y[e.code]||"接口调用错误",i.error_cb&&i.error_cb.call(null,o)}if(i.complete_cb){var a=v(e.data);a.code=e.code,i.complete_cb&&i.complete_cb.call(null,a)}},C=function(e,n,i){t||console.log(s);try{FNJSBridge.call(e,n,function(t){T(t,i||{},e)})}catch(o){alert(o.message)}},M=function(e){var e=e||{};p||(p=!0,u=!!e.debug,u&&r.init(),C("init",e,{complete:function(n){if(window.alert=function(e){yxwork.alert({message:e})},C("getUserAgentInfo",{},{success:function(n){var i=Number(n.sdkVersion||0);o>i&&!e.isUpdate&&(t?yxwork.alert({message:"使用该应用需升级企业易信，请退出程序后重新打开，程序将会自动升级"}):location.assign("https://qiye.yixin.im/clientUpdate?title="+encodeURIComponent(document.title)))}}),200===n.code&&1===n.state)c&&"function"==typeof c&&!m&&(c.call(null),m=!0);else if(l&&"function"==typeof l)l(n);else{var i="";i=404===n.code?"该接口不存在":403===n.code?"没有权限":"验证失败",alert(i)}}}))},O=function(){var e={test:function(e,t,n){C(e,t,n)},init:function(e){t?M(e):d?M(e):document.addEventListener("FNJSBridgeReady",function(){M(e)})},setTitle:function(e){var t=String(e.title||"").trim();""!==t&&C("setTitle",{title:t},e)},setGestureBack:function(e){C("setGestureBack",{disabled:e.disabled||!1},e)},selectMember:function(e){var e=v(e),t=e.selectedIds||[],n=String(e.title||"").trim(),i=String(e.btnText||"").trim();if(e.multiple||(t=[]),b(t)){t=t.yxUnique();var o;if(e.maximum){if(o=Number(e.maximum),isNaN(o))return;if(o<-1)return;if(o===-1)o=-1;else if(0===o)o=0;else if(o<t.length)return}else o=-1;C("selectMember",{title:n||"选择联系人",btext:i||"确定",selType:e.multiple?1:0,maximum:o,selectedIds:t},e)}},pickImage:function(e){var t=3,n=Number(e.count||9);(isNaN(n)||n<=0||n>9)&&(n=9);var i=e.ids||[];if(b(i)){if(i.length>=n)return;if(i=i.yxUnique(),b(e.sourceType)&&e.sourceType.length>0){t=0;for(var o=0,r=e.sourceType.length;o<r;o++)"album"===e.sourceType[o]?t+=1:"camera"===e.sourceType[o]?t+=2:"wangpan"===e.sourceType[o]&&(t+=4)}C("pickImage",{ids:i,count:n,sourceType:t||3,size:e.size},e)}},uploadImage:function(e){var t=e.ids||[];b(t)&&(t=t.yxUnique(),C("uploadImage",{ids:t},e))},previewImage:function(e){C("previewImage",{values:e.values,index:e.index||0},e)},previewOnlineImage:function(e){C("previewImage",{type:1,values:e.urls,index:e.index||0},e)},previewLocalImage:function(e){C("previewImage",{type:2,values:e.ids,index:e.index||0},e)},captureBackAction:function(e){C("captureBackAction",{},{complete:e})},clearBackActionCapture:function(e){C("clearBackActionCapture",{},{complete:e})},setOptionButtons:function(e){var t=v(e.btns)||[],n=/^[\u4e00-\u9fa5]+$/,i=2,o=e.hideMore===!1?1:2;t=t.slice(0,o);var r=t.length;if(e.hideMore!==!1&&1===r&&(i=4),0!==t.length)for(var a=0;a<r;a++){if(t[a].name=String(t[a].name||"").replace(/\s+/g,""),""===t[a].name||!n.test(t[a].name))return;t[a].name=t[a].name.substring(0,i)}e.hideMore!==!1?yxwork.hideOptionMenu():g.length>0&&C("setMoreButtons",{btns:g},{success:function(e){f=!1}}),C("setOptionButtons",{btns:t},e)},hideOptionMenuItems:function(e){var t={shareColleague:1,shareWorkCircle:2,openWithBrowser:3,copyUrl:4,setFont:5,refresh:6},n=[];if(e.btns&&e.btns.length>0){for(var i=0,o=e.btns.length;i<o;i++)t[e.btns[i]]&&delete t[e.btns[i]];for(var r in t)n.push(t[r]);g=n}else g=[1,2,3,4,5,6];f||C("setMoreButtons",{btns:g})},hideOptionMenu:function(){C("setMoreButtons",{btns:[]},{success:function(e){f=!0}})},closeWebView:function(){C("closeWebView",{})},getUserAgentInfo:function(e){C("getUserAgentInfo",{},e)},openUserCard:function(e){C("userCard",{openid:e.openid})},openChat:function(e){C("openChat",{openid:e.openid})},getClientInfo:function(e){C("getClientInfo",{openid:e.openid},e)},getLocation:function(e){C("getLocation",{},e)},download:function(e){C("download",{url:e.url,isShowProgressTips:0===e.isShowProgressTips?0:1,name:e.name||"",suffix:e.suffix||""},e)},getNetworkType:function(e){C("getNetworkType",{},e)},scanQRCode:function(e){C("scanQRCode",{},e)},alert:function(e){var t=String(e.title||"").trim(),n=String(e.message||"").trim(),i=String(e.buttonName||"").trim();""===t&&""===n||C("alert",{title:t,message:n,buttonName:(i||"知道了").substring(0,5)})},confirm:function(e){var t=String(e.title||"").trim(),n=String(e.message||"").trim(),i=String(e.confirmName||"").trim(),o=String(e.cancelName||"").trim();""===t&&""===n||C("confirm",{title:t,message:n,confirmName:(i||"确定").substring(0,5),cancelName:(o||"取消").substring(0,5)},{success:e.success,cancel:e.cancel})},toast:function(e){C("toast",{message:String(e.message||"").trim()})},actionsheet:function(e){var e=v(e);if(e.items&&0!==e.items.length){for(var t=0,n=e.items.length;t<n;t++){var i=e.items[t].name;if(!i)return;e.items[t].name=String(i||"").trim()}C("actionsheet",{title:String(e.title||"").trim(),btnName:"取消",items:e.items.slice(0,6)},e)}},datepicker:function(e){C("datepicker",{init:e.init||(new Date).getTime(),format:e.format||"yyyy-MM-dd"},e)},timepicker:function(e){C("timepicker",{init:e.init||(new Date).getTime(),format:e.format||"hh:mm"},e)},datetimepicker:function(e){C("datetimepicker",{init:e.init||(new Date).getTime(),format:e.format||"yyyy-MM-dd hh:mm"},e)},dropdownMenu:function(e){var e=v(e);if(e.items&&0!==e.items.length){for(var t=0,n=e.items.length;t<n;t++){var i=e.items[t].name;if(!i)return;e.items[t].name=String(i||"").trim()}C("dropdownMenu",{title:String(e.title||"").trim(),items:e.items,defaultValue:x(e.items,"value",e.defaultValue)},e)}},openUrl:function(e){C("openUrl",{system:e.system||0,url:e.url})},copyText:function(e){C("copyToClipboard",{type:1,content:e.text},e)},update:function(e){yxwork.isiOS?window.location.href="itms-apps://itunes.apple.com/us/app/qi-ye-yi-xin/id1121538629?l=zh&ls=1&mt=8":C("update",{},{complete:e})},downPackage:function(e){this.isiOS?window.location.href="itms-apps://itunes.apple.com/us/app/qi-ye-yi-xin/id1121538629?l=zh&ls=1&mt=8":C("downPackage",{},{complete:e})}};yxwork=Object.extend(yxwork,e)};t?(k(),O()):(O(),document.addEventListener("FNJSBridgeReady",function(){d=!0}))}();